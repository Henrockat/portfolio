<!DOCTYPE html>
<html lang="nl-BE">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Verkeerslicht Simulatie - Portfolio</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="css/style.css" />
  <style>
    pre {
      background-color: #f8f9fa;
      padding: 15px;
      border-radius: 5px;
      border: 1px solid #ddd;
      color: #333;
      white-space: pre-wrap;       /* Zorgt ervoor dat lange regels niet wegvallen */
      word-wrap: break-word;      /* Zorgt ervoor dat lange woorden worden afgebroken */
      overflow-x: auto;           /* Zorgt ervoor dat lange regels horizontaal scrollen */
    }
  </style>
</head>
<body class="container py-4">

  <a href="portfolio.html" class="btn btn-outline-secondary mb-4">&larr; Terug naar portfolio</a>

  <h1 class="mb-3">Verkeerslicht Simulatie</h1>
  <p class="lead">Dit project simuleert een verkeerslicht met behulp van drie LEDs (rood, geel en groen). Elke LED brandt gedurende een bepaalde tijd om het gedrag van een echt verkeerslicht na te bootsen.</p>

  <hr class="my-4">

  <h2>Schematische weergave</h2>
  <img src="assets/images/schema-verkeerslicht.jpg" alt="Schema Verkeerslicht" class="img-fluid rounded mb-4"/>

  <h2>Benodigde hardware</h2>
  <ul>
    <li>1x Arduino Uno</li>
    <li>3x LED (rood, geel, groen)</li>
    <li>3x Weerstand (220Ω)</li>
    <li>Breadboard</li>
    <li>Jumper wires</li>
    <li>USB-kabel</li>
  </ul>

  <h2>Stappenplan / Tutorial</h2>
  <ol>
    <li>Plaats de drie LEDs op het breadboard, elk met een weerstand van 220Ω in serie.</li>
    <li>Verbind elke LED met een digitale pin op de Arduino (bijv. 2, 3 en 4).</li>
    <li>Upload onderstaande code naar de Arduino via de Arduino IDE.</li>
    <li>Observeer hoe de LEDs in volgorde knipperen zoals bij een verkeerslicht.</li>
  </ol>

  <h2>Arduino Code</h2>
  <div class="container">
    <pre><code>
    // uitgang voor leds Hoofdbaan
    const int redPin =  10;      
    const int yellowPin =  11;     
    const int greenPin = 12; 
    
    //uitgang voor leds zijbaan
    const int redPinB =  3;      
    const int yellowPinB = 4;     
    const int greenPinB = 5;  
    const int BUTTON_PIN = 13;
      
    // variables voor saten van lichten zijbaan
    int redStateB = LOW;            
    int yellowStateB = LOW;             
    int greenStateB = LOW;
    
    // variables voor saten van lichten Hoofdbaan
    int redState = LOW;            
    int yellowState = LOW;             
    int greenState = LOW;  
               
    // tijd variables voor de cyclus van led sturing
    long startTime = 0;              
    unsigned long currentTime = millis();
    unsigned long elapsedTime;
    long cycleTime = 20000;  
    
    void setup() {
      pinMode(redPin, OUTPUT);  
      pinMode(yellowPin, OUTPUT);      
      pinMode(greenPin, OUTPUT);  
      pinMode(redPinB, OUTPUT);  
      pinMode(yellowPinB, OUTPUT);      
      pinMode(greenPinB, OUTPUT); 
      pinMode(BUTTON_PIN, INPUT_PULLUP);
      Serial.begin(9600);
    }
    
    void loop() {
      trafficA();
      trafficB();
      voorang();
    
      //Serial.println(greenState);
      Serial.print(" ");
      //Serial.print(yellowState);
      Serial.print(" ");
      //Serial.print(redState);
      Serial.print(" ");
      //Serial.println(greenStateB);
      Serial.print(" ");
      //Serial.print(yellowStateB);
      //Serial.print(" ");
      //Serial.print(redStateB);
      Serial.print(" ");
      Serial.println(digitalRead(BUTTON_PIN));
    }
    
    void trafficA() {
      currentTime = millis();
      elapsedTime = currentTime-startTime; // gepasserd tijd vastleggen
      if(elapsedTime > cycleTime) { // als gepasserd tijd grooter dan cyclustijd
        startTime = currentTime;    // reset de starttime naar currentime
      }
    
      if(elapsedTime < 8000) {
        greenState = HIGH;
      } else {
        greenState = LOW;
      }
    
      if (elapsedTime > 8000 && elapsedTime < 10000) {
        yellowState = HIGH; 
      } else {
        yellowState = LOW;
      }
    
      if (elapsedTime > 10000) {
        redState = HIGH;
      } else { 
        redState = LOW; 
      }
    
      digitalWrite(redPin, redState);
      digitalWrite(yellowPin, yellowState);
      digitalWrite(greenPin, greenState);
    }
    
    void trafficB() {
      currentTime = millis();
      elapsedTime = currentTime - startTime;
      if(elapsedTime > cycleTime) {
        startTime = currentTime;
      }
    
      if (elapsedTime > 11000 && elapsedTime < 19000) {
        greenStateB = HIGH;
      } else {
        greenStateB = LOW;
      }
    
      if (elapsedTime > 19000 && elapsedTime < 21000) {
        yellowStateB = HIGH; 
      } else {
        yellowStateB = LOW;
      }
    
      if (elapsedTime < 11000) {
        redStateB = HIGH;
      } else { 
        redStateB = LOW; 
      }
    
      digitalWrite(redPinB, redStateB);
      digitalWrite(yellowPinB, yellowStateB);
      digitalWrite(greenPinB, greenStateB);
    }
    
    void voorang() {
      byte buttonState = digitalRead(BUTTON_PIN);
      if (buttonState == LOW && redState == HIGH) {
        Serial.println("Button is pressed");
      } else {
        Serial.println("Button is not pressed");
      }
    }
    </code></pre>
  </div>

</body>
</html>
